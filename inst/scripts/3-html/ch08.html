

<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
  <title>A Report Generated by knitr</title>
</head>
<body>

  <p>This report is automatically generated with the R
    package <a href="http://yihui.name/knitr"><strong>knitr</strong></a>
    (version <code class="knitr inline">1.5</code>)
    .</p>

<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Chapter 8 Putting the Fun in Functions Moving from Scripts to Functions Making the script</span>
<span class="hl std">x</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">0.458</span><span class="hl std">,</span> <span class="hl num">1.6653</span><span class="hl std">,</span> <span class="hl num">0.83112</span><span class="hl std">)</span>
<span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
<span class="hl std">result</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl kwd">print</span><span class="hl std">(result)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "45.8%"  "166.5%" "83.1%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># source('pastePercent.R') # Only after saving Transforming the script</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl std">result</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
    <span class="hl kwd">return</span><span class="hl std">(result)</span>
<span class="hl std">}</span>
<span class="hl com">## Using the function</span>
<span class="hl kwd">ls</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "addPercent" "percent"    "result"     "x"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Formatting the numbers</span>
<span class="hl std">new.numbers</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">0.8223</span><span class="hl std">,</span> <span class="hl num">0.02487</span><span class="hl std">,</span> <span class="hl num">1.62</span><span class="hl std">,</span> <span class="hl num">0.4</span><span class="hl std">)</span>
<span class="hl kwd">addPercent</span><span class="hl std">(new.numbers)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "82.2%" "2.5%"  "162%"  "40%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Playing with function objects</span>
<span class="hl std">ppaste</span> <span class="hl kwb">&lt;-</span> <span class="hl std">addPercent</span>
<span class="hl std">ppaste</span>
</pre></div>
<div class="output"><pre class="knitr r">## function(x) {
##     percent <- round(x * 100, digits = 1)
##     result <- paste(percent, "%", sep = "")
##     return(result)
## }
## <environment: 0x00000000282499d8>
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Reducing the number of lines Returning values by default AddPercent function without last</span>
<span class="hl com">## return - not written in book</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl std">result</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl kwd">print</span><span class="hl std">(</span><span class="hl kwd">addPercent</span><span class="hl std">(new.numbers))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "82.2%" "2.5%"  "162%"  "40%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl kwa">if</span> <span class="hl std">(</span><span class="hl opt">!</span><span class="hl kwd">is.numeric</span><span class="hl std">(x))</span>
        <span class="hl kwd">return</span><span class="hl std">(</span><span class="hl kwa">NULL</span><span class="hl std">)</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl com">### Breaking the walls</span>
<span class="hl std">odds</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) x</span><span class="hl opt">/</span><span class="hl std">(</span><span class="hl num">1</span> <span class="hl opt">-</span> <span class="hl std">x)</span>
<span class="hl kwd">odds</span><span class="hl std">(</span><span class="hl num">0.8</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 4
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">)</span> <span class="hl kwd">paste</span><span class="hl std">(</span><span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">),</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl com"># Using Arguments the Smart Way Adding more arguments</span>
<span class="hl std">percentages</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">58.23</span><span class="hl std">,</span> <span class="hl num">120.4</span><span class="hl std">,</span> <span class="hl num">33</span><span class="hl std">)</span>
<span class="hl kwd">addPercent</span><span class="hl std">(percentages</span><span class="hl opt">/</span><span class="hl num">100</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "58.2%"  "120.4%" "33%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Adding the mult argument</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">mult</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl std">mult,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl kwd">addPercent</span><span class="hl std">(percentages,</span> <span class="hl kwc">mult</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "58.2%"  "120.4%" "33%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Adding a default value addPercent(new.numbers) # Gives error for illustrative purposes</span>
<span class="hl com">### Error in x * mult : 'mult' is missing</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">mult</span> <span class="hl std">=</span> <span class="hl num">100</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl std">mult,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl kwd">addPercent</span><span class="hl std">(new.numbers)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "82.2%" "2.5%"  "162%"  "40%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">addPercent</span><span class="hl std">(percentages,</span> <span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "58.2%"  "120.4%" "33%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Conjuring tricks with dots</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">mult</span> <span class="hl std">=</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">...</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl std">mult, ...)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl kwd">addPercent</span><span class="hl std">(new.numbers,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "82.23%" "2.49%"  "162%"   "40%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">addPercent</span><span class="hl std">(new.numbers)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "82%"  "2%"   "162%" "40%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">mult</span> <span class="hl std">=</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">round</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl std">mult,</span> <span class="hl kwc">digits</span> <span class="hl std">= digits)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl com">## Using functions as arguments Applying different ways of rounding</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">mult</span> <span class="hl std">=</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">FUN</span> <span class="hl std">= round,</span> <span class="hl kwc">...</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">FUN</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl std">mult, ...)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl kwd">addPercent</span><span class="hl std">(new.numbers,</span> <span class="hl kwc">FUN</span> <span class="hl std">= signif,</span> <span class="hl kwc">digits</span> <span class="hl std">=</span> <span class="hl num">3</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "82.2%" "2.49%" "162%"  "40%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Using anonymous functions</span>
<span class="hl std">profits</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">2100</span><span class="hl std">,</span> <span class="hl num">1430</span><span class="hl std">,</span> <span class="hl num">3580</span><span class="hl std">,</span> <span class="hl num">5230</span><span class="hl std">)</span>
<span class="hl std">rel.profit</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">)</span> <span class="hl kwd">round</span><span class="hl std">(x</span><span class="hl opt">/</span><span class="hl kwd">sum</span><span class="hl std">(x)</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">)</span>
<span class="hl kwd">addPercent</span><span class="hl std">(profits,</span> <span class="hl kwc">FUN</span> <span class="hl std">=</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">)</span> <span class="hl kwd">round</span><span class="hl std">(x</span><span class="hl opt">/</span><span class="hl kwd">sum</span><span class="hl std">(x)</span> <span class="hl opt">*</span> <span class="hl num">100</span><span class="hl std">))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "17%" "12%" "29%" "42%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">addPercent</span><span class="hl std">(profits</span><span class="hl opt">/</span><span class="hl kwd">sum</span><span class="hl std">(profits))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "17%" "12%" "29%" "42%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Coping with Scoping Crossing the borders Creating a test case</span>
<span class="hl std">x</span> <span class="hl kwb">&lt;-</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">5</span>
<span class="hl std">test</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl kwd">cat</span><span class="hl std">(</span><span class="hl str">&quot;This is x:&quot;</span><span class="hl std">, x,</span> <span class="hl str">&quot;\n&quot;</span><span class="hl std">)</span>
    <span class="hl kwd">rm</span><span class="hl std">(x)</span>
    <span class="hl kwd">cat</span><span class="hl std">(</span><span class="hl str">&quot;This is x after removing it:&quot;</span><span class="hl std">, x,</span> <span class="hl str">&quot;\n&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl kwd">test</span><span class="hl std">(</span><span class="hl num">5</span><span class="hl opt">:</span><span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">## This is x: 5 4 3 2 1 
## This is x after removing it: 1 2 3 4 5
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Searching the path Using internal functions</span>
<span class="hl std">calculate.eff</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">y</span><span class="hl std">,</span> <span class="hl kwc">control</span><span class="hl std">) {</span>
    <span class="hl std">min.base</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">z</span><span class="hl std">) z</span> <span class="hl opt">-</span> <span class="hl kwd">mean</span><span class="hl std">(control)</span>
    <span class="hl kwd">min.base</span><span class="hl std">(x)</span><span class="hl opt">/</span><span class="hl kwd">min.base</span><span class="hl std">(y)</span>
<span class="hl std">}</span>
<span class="hl std">half</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">2.23</span><span class="hl std">,</span> <span class="hl num">3.23</span><span class="hl std">,</span> <span class="hl num">1.48</span><span class="hl std">)</span>
<span class="hl std">full</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">4.85</span><span class="hl std">,</span> <span class="hl num">4.95</span><span class="hl std">,</span> <span class="hl num">4.12</span><span class="hl std">)</span>
<span class="hl std">nothing</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">0.14</span><span class="hl std">,</span> <span class="hl num">0.18</span><span class="hl std">,</span> <span class="hl num">0.56</span><span class="hl std">,</span> <span class="hl num">0.23</span><span class="hl std">)</span>
<span class="hl kwd">calculate.eff</span><span class="hl std">(half, full, nothing)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 0.4270 0.6319 0.3129
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Dispatching to a Method Finding the methods behind the function</span>
<span class="hl std">print</span>
</pre></div>
<div class="output"><pre class="knitr r">## function (x, ...) 
## UseMethod("print")
## <bytecode: 0x0000000018f175e8>
## <environment: namespace:base>
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Using methods with UseMethod</span>
<span class="hl std">small.one</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">data.frame</span><span class="hl std">(</span><span class="hl kwc">a</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">2</span><span class="hl std">,</span> <span class="hl kwc">b</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl opt">:</span><span class="hl num">1</span><span class="hl std">)</span>
<span class="hl kwd">print.data.frame</span><span class="hl std">(small.one)</span>
</pre></div>
<div class="output"><pre class="knitr r">##   a b
## 1 1 2
## 2 2 1
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Using default methods</span>
<span class="hl kwd">print.default</span><span class="hl std">(small.one)</span>
</pre></div>
<div class="output"><pre class="knitr r">## $a
## [1] 1 2
## 
## $b
## [1] 2 1
## 
## attr(,"class")
## [1] "data.frame"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Doing it yourself Adapting the addPercent function</span>
<span class="hl std">addPercent.character</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl kwd">paste</span><span class="hl std">(x,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl com"># Not written out in the book - needed for rest code #</span>
<span class="hl std">addPercent.numeric</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">mult</span> <span class="hl std">=</span> <span class="hl num">100</span><span class="hl std">,</span> <span class="hl kwc">FUN</span> <span class="hl std">= round,</span> <span class="hl kwc">...</span><span class="hl std">) {</span>
    <span class="hl std">percent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">FUN</span><span class="hl std">(x</span> <span class="hl opt">*</span> <span class="hl std">mult, ...)</span>
    <span class="hl kwd">paste</span><span class="hl std">(percent,</span> <span class="hl str">&quot;%&quot;</span><span class="hl std">,</span> <span class="hl kwc">sep</span> <span class="hl std">=</span> <span class="hl str">&quot;&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl std">addPercent</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">,</span> <span class="hl kwc">...</span><span class="hl std">) {</span>
    <span class="hl kwd">UseMethod</span><span class="hl std">(</span><span class="hl str">&quot;addPercent&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
<span class="hl kwd">addPercent</span><span class="hl std">(new.numbers,</span> <span class="hl kwc">FUN</span> <span class="hl std">= floor)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "82%"  "2%"   "162%" "40%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">addPercent</span><span class="hl std">(letters[</span><span class="hl num">1</span><span class="hl opt">:</span><span class="hl num">6</span><span class="hl std">])</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "a%" "b%" "c%" "d%" "e%" "f%"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Adding a default function addPercent(small.one) # Gives error on purpose Error in</span>
<span class="hl com"># UseMethod('addPercent') : no applicable method for 'addPercent' applied to an object of</span>
<span class="hl com"># class 'data.frame'</span>
<span class="hl std">addPercent.default</span> <span class="hl kwb">&lt;-</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">) {</span>
    <span class="hl kwd">cat</span><span class="hl std">(</span><span class="hl str">&quot;You should try a numeric or character vector.\n&quot;</span><span class="hl std">)</span>
<span class="hl std">}</span>
</pre></div>
</div></div>


  <p>The R session information (including the OS info, R version and all
    packages used):</p>

<div class="chunk" id="session-info"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">sessionInfo</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 3.0.2 (2013-09-25)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## 
## locale:
## [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252   
## [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                           
## [5] LC_TIME=English_United Kingdom.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] BiocInstaller_1.12.1 ggplot2_0.9.3.1      reshape2_1.2.2       sos_1.3-8           
##  [5] brew_1.0-6           stringr_0.6.2        knitr_1.5            plyr_1.8            
##  [9] Revobase_7.1.0       RevoMods_7.1.0       RevoScaleR_7.1.0     lattice_0.20-27     
## [13] rpart_4.1-2         
## 
## loaded via a namespace (and not attached):
##  [1] codetools_0.2-8    colorspace_1.2-4   dichromat_2.0-0    digest_0.6.4      
##  [5] evaluate_0.5.1     foreach_1.4.1      formatR_0.10       fortunes_1.5-2    
##  [9] grid_3.0.2         gtable_0.1.2       highr_0.3          iterators_1.0.6   
## [13] labeling_0.2       MASS_7.3-29        munsell_0.4.2      proto_0.3-10      
## [17] RColorBrewer_1.0-5 scales_0.2.3       tools_3.0.2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">Sys.time</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "2014-05-13 15:05:42 BST"
</pre></div>
</div></div>




</body>
</html>

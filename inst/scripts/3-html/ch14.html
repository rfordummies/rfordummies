

<!DOCTYPE html>
<html>
<head>
<style type="text/css">
.knitr.inline {
  background-color: #f7f7f7;
  border:solid 1px #B0B0B0;
}
.error {
	font-weight: bold;
	color: #FF0000;
},
.warning {
	font-weight: bold;
}
.message {
	font-style: italic;
}
.source, .output, .warning, .error, .message {
	padding: 0em 1em;
  border:solid 1px #F7F7F7;
}
.source {
  background-color: #f5f5f5;
}
.rimage.left {
  text-align: left;
}
.rimage.right {
  text-align: right;
}
.rimage.center {
  text-align: center;
}
.hl.num {
  color: #AF0F91;
}
.hl.str {
  color: #317ECC;
}
.hl.com {
  color: #AD95AF;
  font-style: italic;
}
.hl.opt {
  color: #000000;
}
.hl.std {
  color: #585858;
}
.hl.kwa {
  color: #295F94;
  font-weight: bold;
}
.hl.kwb {
  color: #B05A65;
}
.hl.kwc {
  color: #55aa55;
}
.hl.kwd {
  color: #BC5A65;
  font-weight: bold;
}
</style>
  <title>A Report Generated by knitr</title>
</head>
<body>

  <p>This report is automatically generated with the R
    package <a href="http://yihui.name/knitr"><strong>knitr</strong></a>
    (version <code class="knitr inline">1.5</code>)
    .</p>

<div class="chunk" id="unnamed-chunk-1"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl com"># Chapter 14 Summarizing Data Starting with the Right Data Using factors or numeric data</span>
<span class="hl com"># Counting unique values</span>
<span class="hl kwd">sapply</span><span class="hl std">(mtcars,</span> <span class="hl kwa">function</span><span class="hl std">(</span><span class="hl kwc">x</span><span class="hl std">)</span> <span class="hl kwd">length</span><span class="hl std">(</span><span class="hl kwd">unique</span><span class="hl std">(x)))</span>
</pre></div>
<div class="output"><pre class="knitr r">##  mpg  cyl disp   hp drat   wt qsec   vs   am gear carb 
##   25    3   27   22   22   29   30    2    2    3    6
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Preparing the data</span>
<span class="hl std">cars</span> <span class="hl kwb">&lt;-</span> <span class="hl std">mtcars[</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">1</span><span class="hl std">,</span> <span class="hl num">2</span><span class="hl std">,</span> <span class="hl num">9</span><span class="hl std">,</span> <span class="hl num">10</span><span class="hl std">)]</span>
<span class="hl std">cars</span><span class="hl opt">$</span><span class="hl std">gear</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">ordered</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">gear)</span>
<span class="hl std">cars</span><span class="hl opt">$</span><span class="hl std">am</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">factor</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">am,</span> <span class="hl kwc">labels</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;auto&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;manual&quot;</span><span class="hl std">))</span>
<span class="hl kwd">str</span><span class="hl std">(cars)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 'data.frame':	32 obs. of  4 variables:
##  $ mpg : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ am  : Factor w/ 2 levels "auto","manual": 2 2 2 1 1 1 1 1 1 1 ...
##  $ gear: Ord.factor w/ 3 levels "3"<"4"<"5": 2 2 2 1 1 1 1 2 2 2 ...
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Describing Continuous Variables Talking about the center of your data</span>
<span class="hl kwd">mean</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 20.09
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">median</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">cyl)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 6
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Describing the variation</span>
<span class="hl kwd">sd</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 6.027
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Checking the quantiles Calculating the range</span>
<span class="hl kwd">range</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 10.4 33.9
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Calculating the quantiles</span>
<span class="hl kwd">quantile</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg)</span>
</pre></div>
<div class="output"><pre class="knitr r">##    0%   25%   50%   75%  100% 
## 10.40 15.43 19.20 22.80 33.90
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Getting on speed with the quantile function</span>
<span class="hl kwd">quantile</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg,</span> <span class="hl kwc">probs</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">0.05</span><span class="hl std">,</span> <span class="hl num">0.95</span><span class="hl std">))</span>
</pre></div>
<div class="output"><pre class="knitr r">##   5%  95% 
## 12.0 31.3
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Describing Categories Counting appearances Creating a table</span>
<span class="hl std">amtable</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">table</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">am)</span>
<span class="hl std">amtable</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
##   auto manual 
##     19     13
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Working with tables Calculating proportions</span>
<span class="hl std">amtable</span><span class="hl opt">/</span><span class="hl kwd">sum</span><span class="hl std">(amtable)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
##   auto manual 
## 0.5938 0.4062
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">prop.table</span><span class="hl std">(amtable)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 
##   auto manual 
## 0.5938 0.4062
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Finding the center</span>
<span class="hl std">id</span> <span class="hl kwb">&lt;-</span> <span class="hl std">amtable</span> <span class="hl opt">==</span> <span class="hl kwd">max</span><span class="hl std">(amtable)</span>
<span class="hl kwd">names</span><span class="hl std">(amtable)[id]</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "auto"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com"># Describing Distributions Plotting histograms Making the plot</span>
<span class="hl kwd">hist</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg,</span> <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl str">&quot;grey&quot;</span><span class="hl std">)</span>
</pre></div>
</div><div class="rimage center"><img src="figure/ch14-Rhtmlunnamed-chunk-11.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com">### Playing with breaks</span>
<span class="hl kwd">hist</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg,</span> <span class="hl kwc">breaks</span> <span class="hl std">=</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">5</span><span class="hl std">,</span> <span class="hl num">15</span><span class="hl std">,</span> <span class="hl num">25</span><span class="hl std">,</span> <span class="hl num">35</span><span class="hl std">))</span>
</pre></div>
</div><div class="rimage center"><img src="figure/ch14-Rhtmlunnamed-chunk-12.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com">## Using frequencies or densities Creating a density plot</span>
<span class="hl std">mpgdens</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">density</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg)</span>
<span class="hl kwd">plot</span><span class="hl std">(mpgdens)</span>
</pre></div>
</div><div class="rimage center"><img src="figure/ch14-Rhtmlunnamed-chunk-13.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com">### Plotting densities in a histogram</span>
<span class="hl kwd">hist</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">mpg,</span> <span class="hl kwc">col</span> <span class="hl std">=</span> <span class="hl str">&quot;grey&quot;</span><span class="hl std">,</span> <span class="hl kwc">freq</span> <span class="hl std">=</span> <span class="hl num">FALSE</span><span class="hl std">)</span>
<span class="hl kwd">lines</span><span class="hl std">(mpgdens)</span>
</pre></div>
</div><div class="rimage center"><img src="figure/ch14-Rhtmlunnamed-chunk-14.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com"># Describing Multiple Variables Summarizing a complete dataset Getting the output</span>
<span class="hl kwd">summary</span><span class="hl std">(cars)</span>
</pre></div>
<div class="output"><pre class="knitr r">##       mpg            cyl            am     gear  
##  Min.   :10.4   Min.   :4.00   auto  :19   3:15  
##  1st Qu.:15.4   1st Qu.:4.00   manual:13   4:12  
##  Median :19.2   Median :6.00               5: 5  
##  Mean   :20.1   Mean   :6.19                     
##  3rd Qu.:22.8   3rd Qu.:8.00                     
##  Max.   :33.9   Max.   :8.00
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Fixing a problem</span>
<span class="hl std">cars</span><span class="hl opt">$</span><span class="hl std">cyl</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">as.factor</span><span class="hl std">(cars</span><span class="hl opt">$</span><span class="hl std">cyl)</span>
<span class="hl com">## Plotting quantiles for subgroups</span>
<span class="hl kwd">boxplot</span><span class="hl std">(mpg</span> <span class="hl opt">~</span> <span class="hl std">cyl,</span> <span class="hl kwc">data</span> <span class="hl std">= cars)</span>
</pre></div>
</div><div class="rimage center"><img src="figure/ch14-Rhtmlunnamed-chunk-15.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com">## Tracking correlations</span>
<span class="hl kwd">names</span><span class="hl std">(iris)</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "Sepal.Length" "Sepal.Width"  "Petal.Length" "Petal.Width"  "Species"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Looking at relations</span>
<span class="hl kwd">plot</span><span class="hl std">(iris[</span><span class="hl opt">-</span><span class="hl num">5</span><span class="hl std">])</span>
</pre></div>
</div><div class="rimage center"><img src="figure/ch14-Rhtmlunnamed-chunk-16.png" title="plot of chunk unnamed-chunk-1" alt="plot of chunk unnamed-chunk-1" class="plot" /></div><div class="rcode">
<div class="source"><pre class="knitr r"><span class="hl com">### Getting the numbers</span>
<span class="hl kwd">with</span><span class="hl std">(iris,</span> <span class="hl kwd">cor</span><span class="hl std">(Petal.Width, Petal.Length))</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 0.9629
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Calculating correlations for multiple variables</span>
<span class="hl std">iris.cor</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">cor</span><span class="hl std">(iris[</span><span class="hl opt">-</span><span class="hl num">5</span><span class="hl std">])</span>
<span class="hl kwd">str</span><span class="hl std">(iris.cor)</span>
</pre></div>
<div class="output"><pre class="knitr r">##  num [1:4, 1:4] 1 -0.118 0.872 0.818 -0.118 ...
##  - attr(*, "dimnames")=List of 2
##   ..$ : chr [1:4] "Sepal.Length" "Sepal.Width" "Petal.Length" "Petal.Width"
##   ..$ : chr [1:4] "Sepal.Length" "Sepal.Width" "Petal.Length" "Petal.Width"
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">iris.cor[</span><span class="hl str">&quot;Petal.Width&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;Petal.Length&quot;</span><span class="hl std">]</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 0.9629
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Dealing with missing values Working with Tables Creating a two-way table Creating a table</span>
<span class="hl com">### from two variables</span>
<span class="hl kwd">with</span><span class="hl std">(cars,</span> <span class="hl kwd">table</span><span class="hl std">(am, gear))</span>
</pre></div>
<div class="output"><pre class="knitr r">##         gear
## am        3  4  5
##   auto   15  4  0
##   manual  0  8  5
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Creating tables from a matrix</span>
<span class="hl std">trial</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">matrix</span><span class="hl std">(</span><span class="hl kwd">c</span><span class="hl std">(</span><span class="hl num">34</span><span class="hl std">,</span> <span class="hl num">11</span><span class="hl std">,</span> <span class="hl num">9</span><span class="hl std">,</span> <span class="hl num">32</span><span class="hl std">),</span> <span class="hl kwc">ncol</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">)</span>
<span class="hl kwd">colnames</span><span class="hl std">(trial)</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;sick&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;healthy&quot;</span><span class="hl std">)</span>
<span class="hl kwd">rownames</span><span class="hl std">(trial)</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">c</span><span class="hl std">(</span><span class="hl str">&quot;risk&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;no_risk&quot;</span><span class="hl std">)</span>
<span class="hl std">trial.table</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">as.table</span><span class="hl std">(trial)</span>
<span class="hl std">trial.table</span>
</pre></div>
<div class="output"><pre class="knitr r">##         sick healthy
## risk      34       9
## no_risk   11      32
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Extracting the numbers</span>
<span class="hl std">trial.table[</span><span class="hl str">&quot;risk&quot;</span><span class="hl std">,</span> <span class="hl str">&quot;sick&quot;</span><span class="hl std">]</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] 34
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Converting tables to a data frame</span>
<span class="hl std">trial.df</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">as.data.frame</span><span class="hl std">(trial)</span>
<span class="hl kwd">str</span><span class="hl std">(trial.df)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 'data.frame':	2 obs. of  2 variables:
##  $ sick   : num  34 11
##  $ healthy: num  9 32
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl std">trial.table.df</span> <span class="hl kwb">&lt;-</span> <span class="hl kwd">as.data.frame</span><span class="hl std">(trial.table)</span>
<span class="hl kwd">str</span><span class="hl std">(trial.table.df)</span>
</pre></div>
<div class="output"><pre class="knitr r">## 'data.frame':	4 obs. of  3 variables:
##  $ Var1: Factor w/ 2 levels "risk","no_risk": 1 2 1 2
##  $ Var2: Factor w/ 2 levels "sick","healthy": 1 1 2 2
##  $ Freq: num  34 11 9 32
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">## Looking at margins and proportions Adding margins to the table</span>
<span class="hl kwd">addmargins</span><span class="hl std">(trial.table)</span>
</pre></div>
<div class="output"><pre class="knitr r">##         sick healthy Sum
## risk      34       9  43
## no_risk   11      32  43
## Sum       45      41  86
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">addmargins</span><span class="hl std">(trial.table,</span> <span class="hl kwc">margin</span> <span class="hl std">=</span> <span class="hl num">2</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">##         sick healthy Sum
## risk      34       9  43
## no_risk   11      32  43
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Calculating proportions</span>
<span class="hl kwd">prop.table</span><span class="hl std">(trial.table)</span>
</pre></div>
<div class="output"><pre class="knitr r">##           sick healthy
## risk    0.3953  0.1047
## no_risk 0.1279  0.3721
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl com">### Calculating proportions over columns and rows</span>
<span class="hl kwd">prop.table</span><span class="hl std">(trial.table,</span> <span class="hl kwc">margin</span> <span class="hl std">=</span> <span class="hl num">1</span><span class="hl std">)</span>
</pre></div>
<div class="output"><pre class="knitr r">##           sick healthy
## risk    0.7907  0.2093
## no_risk 0.2558  0.7442
</pre></div>
</div></div>


  <p>The R session information (including the OS info, R version and all
    packages used):</p>

<div class="chunk" id="session-info"><div class="rcode"><div class="source"><pre class="knitr r"><span class="hl kwd">sessionInfo</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## R version 3.0.2 (2013-09-25)
## Platform: x86_64-w64-mingw32/x64 (64-bit)
## 
## locale:
## [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United Kingdom.1252   
## [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C                           
## [5] LC_TIME=English_United Kingdom.1252    
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
##  [1] BiocInstaller_1.12.1 ggplot2_0.9.3.1      reshape2_1.2.2       sos_1.3-8           
##  [5] brew_1.0-6           stringr_0.6.2        knitr_1.5            plyr_1.8            
##  [9] Revobase_7.1.0       RevoMods_7.1.0       RevoScaleR_7.1.0     lattice_0.20-27     
## [13] rpart_4.1-2         
## 
## loaded via a namespace (and not attached):
##  [1] codetools_0.2-8    colorspace_1.2-4   dichromat_2.0-0    digest_0.6.4      
##  [5] evaluate_0.5.1     foreach_1.4.1      formatR_0.10       fortunes_1.5-2    
##  [9] grid_3.0.2         gtable_0.1.2       highr_0.3          iterators_1.0.6   
## [13] labeling_0.2       MASS_7.3-29        munsell_0.4.2      proto_0.3-10      
## [17] RColorBrewer_1.0-5 scales_0.2.3       tools_3.0.2
</pre></div>
<div class="source"><pre class="knitr r"><span class="hl kwd">Sys.time</span><span class="hl std">()</span>
</pre></div>
<div class="output"><pre class="knitr r">## [1] "2014-05-13 15:06:14 BST"
</pre></div>
</div></div>




</body>
</html>
